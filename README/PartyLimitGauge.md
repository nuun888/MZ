# [パーティリミットゲージ](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_PartyLimitGauge.js)
# Ver.1.6.1
[ダウンロード](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_PartyLimitGauge.js)
#### 必須、前提プラグイン
[共通処理](https://github.com/nuun888/MZ/blob/master/README/Base.md)  

パーティメンバー、敵グループでそれぞれ共用するゲージを実装します。  
ダメージを受けた時、撃破時、勝利時、敗北時、逃走時にリミットポイントがチャージします。  
すべて評価式が使用可能です。  

### 取得パラメータ
`$gameParty._limitGauge`　味方のリミットゲージ  
`$gameTroop._limitGauge`　敵のリミットゲージ  

### リミットゲージを増減させるアイテム、スキル
スキルのメモ欄   
`<limitCost:[cost]>` スキルのコストを設定します。  
`[cost]`:コスト  
`<limitCost:50>` スキルのコストとしてリミットゲージを５０を消費します。  

`<LimitCostWidth:[string]>` コストの表示幅を文字列で指定します。指定した文字列の横幅がスキル名の横幅に影響します。  
`[string]`:文字列  
`<LimitCostWidth:00000>` コストの表示幅として00000の長さが設定させます。  

### リミットゲージを増減
スキル、アイテムのメモ欄  
`<LimitEffect:10>` リミットゲージが10増加します。  
`<LimitEffect:-10>` リミットゲージが10減少します。  
単体選択のスキル、アイテムの場合は対象がアクターなら味方のリミットゲージ、敵なら敵グループのリミットゲージが増減します。  

### 攻撃成功時及びクリティカル時のアイテム、スキルごとの回復設定
スキル、アイテムのメモ欄  
`<LimitAttacklStr:[eval]>` 攻撃時にリミットゲージが増加します。  
`<LimitCriticalStr:[eval]>` クリティカル時にリミットゲージが増加します。  
`[eval]`:評価式  

#### 評価式(JavaScript)
被ダメージ時  
a:被ダメージバトラーデータ　da：被ダメージバトラーデータベース　damage:ダメージ値  cri:クリティカル  
`Math.floor(25 * damage / a.mhp)`ダメージ量に応じて  
`Math.floor(25 * damage / a.mhp) * (cri ? 3 : 1)`クリティカル時のみ３倍  
攻撃成功時、クリティカル時  
a:攻撃者バトラーデータ　da：攻撃者バトラーデータベース cri:クリティカル成功  item:使用スキル、アイテム  
`(a.actorId() === 6 ? 10 : 0)`アクターIDが6番のアクターが攻撃に成功した時。  
撃破時  
a:撃破されたバトラーデータ　da：撃破されたバトラーデータベース  

### ゲージ表示拡張プラグインと併用する場合
以下のプラグインパラメータはゲージ表示拡張プラグインで設定してください。  
ゲージの色1  
ゲージの色2  

### 各色の設定
色設定はテキストタブでカラーコードが入力できます。  

## 更新履歴
2024/3/16 Ver.1.6.1  
最初のターンでリミットゲージが消えてしまう問題を修正。  
2024/2/17 Ver.1.6.0  
リミットゲージの回復にターン時を追加。  
2023/7/28 Ver.1.5.2  
表示スイッチIDの表示切り替えが機能していなかった問題を修正。  
敵のリミットポイントの表示がされなかった問題を修正。  
2023/5/20 Ver.1.5.1  
誤字修正。  
説明文の修正。  
2023/5/13 Ver.1.5.0  
リミットゲージの回復時の設定に、攻撃時とクリティカル時を追加。  
2023/4/1 Ver.1.4.1  
リミットゲージの処理修正。  
2023/4/1 Ver.1.4.0  
プラグインコマンドでリミットゲージを増減させる機能を追加。  
ラベル名設定時のゲージの表示を通常のゲージの表示と統一。  
2023/1/21 Ver.1.3.0  
MP、TPのコストが設定されていた場合、パーティリミットコストが重なってします問題を修正。  
MP、TPのスキルコストが設定されている場合、表示幅を指定できる機能を追加。  
パーティリミットの発動スキル毎にコストの表示幅を指定できる機能を追加。  
2022/12/28 Ver.1.2.1  
処理の修正。  
2022/12/24 Ver.1.2.0  
リミットゲージを増減するアイテム、スキルを設定できる機能を追加。  
日本語以外での表示を英語表示に変更。  
2022/12/15 Ver.1.1.2  
カラー指定のプラグインパラメータのTypeをcolorに変更。(Ver.1.6.0以降)  
ゲージ画像化でゲージを画像化するとエラーが出る問題を修正。  
2022/6/11 Ver.1.1.1  
パーティリミットが戦闘開始時にリセットされない問題を修正。  
2021/12/20 Ver.1.1.0  
ゲージ画像化に対応。  
2021/12/19 Ver.1.0.4  
ゲージ表示拡張併用時にエラーが出る問題を修正。  
2021/12/5 Ver.1.0.3  
ゲージ表示拡張プラグインとの競合対策。  
2021/11/24 Ver.1.0.2  
リミットポイントのコストと残りコストが同じ時にスキルが使えない問題を修正。  
2021/11/24 Ver.1.0.1  
戦闘勝利時、逃走時にエラーが出る問題を修正。  
2021/11/15 Ver.1.0.0  
初版  
