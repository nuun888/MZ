# [パッシブスキル](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_PassiveSkill.js)
# Ver.1.6.1
[ダウンロード](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_PassiveSkill.js)
#### 必須、前提プラグイン
[共通処理](https://github.com/nuun888/MZ/blob/master/README/Base.md)  
#### オプション
※大量のパッシブスキルを持たせる場合は必須  
[特徴パフォーマンス改善](https://github.com/nuun888/MZ/blob/master/README/TraitsFPSImprovement.md)  

Ver.1.5.5まで条件モードの説明が逆に表記されていました。  
正しくは  
`<PassiveMatch:0>` いずれかの条件が一致したときに反映します。  
`<PassiveMatch:1>` 全ての条件が一致したときに反映します。  
未記入の場合は全ての条件を満たしたときになります。  
が正しい表記になります。  

パッシブスキルを実装します。  
スキルを習得していれば指定した武器のステータスが反映されます。  
発動条件は指定することで特定の条件でのみ発動するパッシブスキルを作ることが出来ます。条件はプラグインパラメータで設定し、そのリストIDを指定することで判定します。条件は複数指定可能です。  
発動条件はPassiveMatchタグがない場合は、すべての条件が一致したときにパッシブスキルが適用されます。  
武器にタグ記述で発動できるプラグインの効果も適用されます。（一部を除く）  
※条件設定がない場合は、無条件でパッシブスキルが適用されます。  

## 設定方法
#### パッシブスキルの設定
パッシブスキルを適用するにはスキルのメモ欄に以下のタグを記入します。  
以下のタグが付いたスキルはパッシブスキルになります。  
スキルのメモ欄  
`<PassiveSkill:[id]>` [id]:適用する武器ID  
`<PassiveSkill:10>` 武器ID10番の武器のステータスが反映されます。  

設定した武器IDにパッシブスキルのパラメータを設定します。  
別プラグインでメモ欄に記入したタグも適用されます。  

適用条件  
プラグインパラメータの発動条件でパッシブスキルの適用条件を設定します。  
スキルのメモ欄  
パッシブスキル適用条件(無記入の場合は常時適用されます)  
指定IDは適用条件のリスト番号を記入します。一番上の設定なら1  
`<PassiveMatch:[mode]>` 条件判定するモードを指定します。[mode] 0:一部一致　1:全て 無記入の場合は全て一致で判定します。  
`<PassiveMatch:0>` いずれかの条件が一致したときに反映します。  
`<PassiveMatch:1>` 全ての条件が一致したときに反映します。  
`<PassiveConditions:[id],[id],....>` [id]:発動条件で設定したリスト番号  　記入がない場合は無条件で適用されます。  
`<PassiveConditions:1>` 発動条件リストID1番の条件が一致したときに発動します。  
`<PassiveConditions:1,2,3>` 発動条件リストID1,2,3番の条件が全て一致したときに発動します。  

#### 敵キャラのパッシブスキルの設定
敵キャラの行動パターンに設定してください。  
行動パターンの条件、当プラグインの条件が一致のパッシブスキルのみ適用されます。  

#### 条件付きベースプラグインから設定 
プラグインパラメータの条件付きベース条件適用をONにしてください。
`<PassiveConditions:[id],[id],[id]...>` 指定したIDの条件を全て満たしたときに使用可能です。  
`<PartyPassiveConditions:[id],[id],[id]...>` パーティメンバーの指定したIDの条件を全て満たしたときに使用可能です。  
`<TroopPassiveConditions:[id],[id],[id]...>` 敵グループの指定したIDの条件を全て満たしたときに使用可能です。  
`<PassiveMatch:[mode]>` 条件判定するモードを指定します。[mode] 0:一部一致　1:全て 無記入の場合は全て一致で判定します。  

敵グループ指定の場合戦闘中のみ条件判定します。

`[id]`:条件付きベースの適用条件のリストID  
`<PassiveMatch:[mode]>` 条件のモードを設定します。  
`<PassiveMatch:0>` いずれかの条件が一致したときに反映します。  
`<PassiveMatch:1>` 全ての条件が一致したときに反映します。  
未記入の場合は全ての条件を満たしたときになります。  

#### 発動条件
条件はプラグインパラメータの発動条件から設定します。  
条件ベースから条件を設定する場合は条件付きベース条件適用をONにしてください。この場合、パッシブスキルの条件は適用されません。  
上限値　指定した数値以下の値なら反映されます。  
下限値　指定した数値以上の値なら反映されます。  
例  
対象:HP 上限値:30　下限値:0 ＨＰが３０％以下の時に反映します。  
対象:HP 上限値:80　下限値:30 ＨＰが３０％～８０％の時に反映します。  
対象:MP 上限値:0　下限値:80 ＭＰが８０％以上の時に反映します。  
対象:TP 上限値:0　下限値:100 ＴＰが１００％の時に反映します。  
対象:State ステートID:6 ステート６番のステートに掛かっている時に反映します。  
対象:StateR ステートID:5 ステート５番のステートに掛かっていない時に反映します。  
対象:Turn 上限値:0　下限値:10 １０ターン目以降に反映します。  
対象:Turn 上限値:3　下限値:0 ３ターン目まで反映します。  
対象:GVal ゲーム変数:5 上限値:30　下限値:10 ゲーム変数５番が１０以上３０以下の時に反映します。  
対象:GSwc ゲーム変数スイッチ:5 ゲームスイッチがtrueの時に反映します。  
対象:Equip 武器タイプ:10 武器タイプ10番の武器を装備しているに反映します。武器タイプを設定している場合は防具タイプの設定は無視されます。  
対象:Equip 防具タイプ:8 防具タイプ8番の武器を装備しているに反映します。

#### 条件付きベースを使用しての設定例
設定例1:  
条件タイプ1:Member 戦闘メンバー数：上限0 下限4  
条件タイプ2:Member 生存メンバー数：指定の数値1  
パッシブ条件　`<PartyPassiveConditions:1,2>` 味方のパーティメンバーが４人以上でかつ、生存メンバーが１人のとき  

パッシブスキルが適用された武器のステータス、特徴が適用されます。  

### 競合
NRP_TraitsPlusへの特徴適用  
[NRP_TraitsPlus能力値特徴適用](https://github.com/nuun888/MZ/blob/master/README/TraitsPlusNuunTraitObjects.md)  

DynamicEquipParamへの競合対応は行いません。  

## 更新履歴
2025/8/15 Ver.1.6.1  
一部処理の修正。  
2025/7/27 Ver.1.6.0  
パッシブスキルを敵にも適用。  
2025/6/22 Ver.1.5.9  
パフォーマンス低下防止のため処理を変更。  
2024/8/31 Ver.1.5.8  
装備タイプの防具が機能していなかった問題を修正。  
2023/3/4 Ver.1.5.7  
パッシブスキル習得時に更新処理を行うように修正。  
2023/1/28 Ver.1.5.6  
一部の条件モードの説明が逆に表記していたので修正。  
2022/11/23 Ver.1.5.5  
再修正。  
2022/11/20 Ver.1.5.4  
特定のプラグインとの併用で、著しくパフォーマンスが低下する問題を修正。  
日本語以外での表示を英語表示に変更。  
2022/2/4 Ver.1.1.2  
処理の修正。  
2022/1/3 Ver.1.5.2  
Ver.1.5.0以降でこのプラグインで設定した条件武器、防具タイプ、乗り物を条件指定するとエラーが出る問題を修正。  
2021/12/31 Ver.1.5.1  
特徴で習得しているスキルからでも適用できるように変更。  
2021/12/31 Ver.1.5.0  
条件付きベースに対応。  
2021/12/31 Ver.1.4.1  
条件タグを指定してないときに、パッシブスキルが適用されていなかった問題を修正。  
2021/8/13 Ver.1.4.0  
条件に乗り物を追加。  
2021/8/6 Ver.1.3.0  
条件にバフ、デバフを追加。  
2021/8/1 Ver.1.2.1  
パッシブスキルの適用条件の仕様を変更。  
2021/7/31 Ver.1.2.0  
条件一致の判定方法を指定できる機能を追加。  
条件でHP、MPを判定するスキルを習得した場合、戦闘時に処理が重くなる問題を修正。  
2021/7/29 Ver.1.1.1  
処理の修正。  
2021/7/28 Ver.1.1.0  
ステートに掛かっていない時に反映させる機能を追加。  
特定の武器、防具タイプを装備している時のみ反映させる機能を追加。  
特定の状況でステータスの表示がされていなかった問題を修正。  
2021/7/27 Ver.1.0.0  
初版  
